# ICPNomad Backend Configuration
# This file contains all environment variables needed for the ICPNomad backend API

# =============================================================================
# Application Settings
# =============================================================================
NODE_ENV=development
PORT=3000
APP_NAME=ICPNomad

# =============================================================================
# ICP Network Configuration
# =============================================================================
# Local development: http://127.0.0.1:4943
# IC mainnet: https://ic0.app
# IC testnet: https://testnet.dfinity.network
ICP_HOST=http://127.0.0.1:4943

# DFX network to use (local, ic, testnet)
DFX_NETWORK=local

# =============================================================================
# Canister IDs
# =============================================================================
# Main wallet canister that handles all wallet operations
# This canister implements privacy-preserving wallet logic
CANISTER_ID_ICPNOMADWALLET=

# Backend canister for additional business logic (if deployed)
CANISTER_ID_ICPNOMAD_BACKEND=

# Custom stablecoin canister for testing (optional)
CANISTER_ID_CUSTOM_STABLECOIN=

# =============================================================================
# Security Configuration
# =============================================================================
# JWT secret for API authentication (change in production)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# Salt rounds for PIN hashing (recommended: 12)
PIN_SALT_ROUNDS=12

# Secret for phone number hashing (change in production)
PHONE_HASH_SECRET=your-phone-hash-secret-change-in-production

# =============================================================================
# USSD Configuration
# =============================================================================
# USSD service code (e.g., *123# for testing)
USSD_SERVICE_CODE=*123#

# Session timeout in milliseconds (5 minutes default)
# Controls how long USSD sessions remain active without user input
USSD_SESSION_TIMEOUT=300000

# Maximum menu depth for USSD navigation
# Prevents infinite recursion in menu systems
USSD_MAX_MENU_DEPTH=5

# Base URL for API calls from USSD service
# Used by ussdService.ts to make HTTP requests to backend
API_BASE_URL=http://localhost:3000

# USSD gateway configuration (for production integration)
# URL for external USSD gateway provider
USSD_GATEWAY_URL=https://api.ussd-provider.com/v1

# API key for USSD gateway authentication
USSD_GATEWAY_API_KEY=your-ussd-gateway-api-key

# Webhook URL for receiving USSD requests from gateway
USSD_WEBHOOK_URL=https://your-domain.com/webhook/ussd

# Secret for validating USSD webhook requests
USSD_WEBHOOK_SECRET=your-webhook-validation-secret

# Maximum number of concurrent USSD sessions
# Helps prevent resource exhaustion
USSD_MAX_CONCURRENT_SESSIONS=1000

# USSD response timeout in milliseconds (30 seconds default)
# Maximum time to wait for user input in USSD session
USSD_RESPONSE_TIMEOUT=30000

# Enable USSD session logging for debugging (disable in production)
USSD_DEBUG_LOGGING=true

# USSD menu language (for internationalization)
USSD_DEFAULT_LANGUAGE=en

# Supported USSD languages (comma-separated)
USSD_SUPPORTED_LANGUAGES=en,sw,fr

# =============================================================================
# Database Configuration (Optional - for caching/analytics only)
# =============================================================================
# MongoDB connection string (optional - wallets stored on-chain)
MONGODB_URI=mongodb://localhost:27017/icpnomad

# Test database for running tests
MONGODB_TEST_URI=mongodb://localhost:27017/icpnomad_test

# =============================================================================
# Payment Provider Configuration
# =============================================================================
# Mock payment provider API for fiat-to-crypto conversion
PAYMENT_PROVIDER_API_URL=https://api.mock-payment-provider.com
PAYMENT_PROVIDER_API_KEY=mock-api-key
PAYMENT_PROVIDER_WEBHOOK_SECRET=mock-webhook-secret

# =============================================================================
# Logging Configuration
# =============================================================================
# Log level: error, warn, info, debug
LOG_LEVEL=info

# Log file path
LOG_FILE=logs/icpnomad.log

# Maximum log file size
LOG_MAX_SIZE=10m

# Maximum number of log files to keep
LOG_MAX_FILES=5

# =============================================================================
# ICP Ledger Configuration
# =============================================================================
# ICP Ledger canister ID (mainnet: rrkah-fqaaa-aaaaa-aaaaq-cai)
ICP_LEDGER_CANISTER_ID=rrkah-fqaaa-aaaaa-aaaaq-cai

# ICP Index canister ID for transaction history
ICP_INDEX_CANISTER_ID=qhbym-qaaaa-aaaah-qcvqq-cai

# =============================================================================
# Stablecoin Configuration
# =============================================================================
# ckUSDC canister ID (mainnet: xkbqi-6qaaa-aaaah-qbpqq-cai)
STABLECOIN_CANISTER_ID=xkbqi-6qaaa-aaaah-qbpqq-cai

# Stablecoin symbol (ckUSDC, ckUSDT, etc.)
STABLECOIN_SYMBOL=ckUSDC

# Number of decimal places for stablecoin (6 for USSD)
STABLECOIN_DECIMALS=6

# =============================================================================
# Rate Limiting Configuration
# =============================================================================
# Rate limit window in milliseconds (15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window per IP
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# Transaction Limits
# =============================================================================
# Minimum deposit amount in USD
MIN_DEPOSIT_AMOUNT=1.00

# Maximum deposit amount in USD
MAX_DEPOSIT_AMOUNT=10000.00

# Minimum withdrawal amount in USD
MIN_WITHDRAWAL_AMOUNT=1.00

# Maximum withdrawal amount in USD
MAX_WITHDRAWAL_AMOUNT=5000.00

# Transaction fee in USD (for external provider fees)
TRANSACTION_FEE=0.001

# =============================================================================
# Health Check Configuration
# =============================================================================
# Health check endpoint timeout in milliseconds
HEALTH_CHECK_TIMEOUT=5000

# =============================================================================
# CORS Configuration
# =============================================================================
# Allowed origins for CORS (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# =============================================================================
# Privacy Settings
# =============================================================================
# Enable request ID tracking for audit logs
ENABLE_REQUEST_TRACKING=true

# Maximum number of transaction history entries to return
MAX_TRANSACTION_HISTORY=100

# =============================================================================
# Development Settings
# =============================================================================
# Enable development mode features
DEV_MODE=true

# Enable verbose logging in development
VERBOSE_LOGGING=true

# Enable mock USSD responses for testing
MOCK_USSD=true

# Mock CLI configuration
# Enable colored output in mock CLI
MOCK_CLI_COLORS=true

# Enable ASCII art banner in mock CLI
MOCK_CLI_BANNER=true

# Simulate network delays in mock CLI (milliseconds)
MOCK_CLI_NETWORK_DELAY=1000